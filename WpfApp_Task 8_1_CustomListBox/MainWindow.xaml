<Window x:Class="WpfApp_Task_8_1_CustomListBox.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp_Task_8_1_CustomListBox"
        mc:Ignorable="d"
        Title="Список товаров" Height="450" Width="500">

    <Window.Resources>
        <DataTemplate x:Key="ListBoxTemplate">
            <Border x:Name="Border" BorderBrush="Gray" BorderThickness="1" 
                    CornerRadius="5" Margin="5" Padding="10"
                    Background="White">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Изображение товара -->
                    <Image Grid.Column="0" Width="80" Height="80" 
                           Source="{Binding ImagePath}"
                           Stretch="Uniform" Margin="0,0,10,0"/>

                    <!-- Информация о товаре -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock Text="{Binding ProductName}" 
                                   FontWeight="Bold" FontSize="14"
                                   TextWrapping="Wrap"/>
                        <TextBlock Text="{Binding Price, StringFormat='Цена: {0} руб.'}"
                                   FontSize="12" Margin="0,5,0,0"/>
                    </StackPanel>
                    
                </Grid>
            </Border>

            <DataTemplate.Triggers>
                <!-- Триггер для категории Еда -->
                <DataTrigger Binding="{Binding Category}" 
                             Value="{x:Static local:ProductCategory.Food}">
                    <Setter TargetName="Border" Property="Background" Value="#FFF0F8FF"/>
                    <Setter TargetName="Border" Property="BorderBrush" Value="#FF87CEFA"/>
                </DataTrigger>

                <!-- Триггер для категории Бытовая техника -->
                <DataTrigger Binding="{Binding Category}" 
                             Value="{x:Static local:ProductCategory.HouseholdEquipment}">
                    <Setter TargetName="Border" Property="Background" Value="#FFFFF0F5"/>
                    <Setter TargetName="Border" Property="BorderBrush" Value="#FFFF69B4"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <ListBox ItemsSource="{Binding Products}"
                 ItemTemplate="{StaticResource ListBoxTemplate}"
                 HorizontalContentAlignment = "Stretch">
        </ListBox>
    </Grid>
</Window>